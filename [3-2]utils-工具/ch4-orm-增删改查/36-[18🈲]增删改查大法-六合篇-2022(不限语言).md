# [18ğŸˆ²]å¢åˆ æ”¹æŸ¥å¤§æ³•-å…­åˆç¯‡-2022(ä¸é™è¯­è¨€)

> @todo æ€»ç»“ä¸€ä¸‹, å¤§è‡´åˆ†5ç§æ€è·¯

- æ‹¼æ¥å ä½å­—ç¬¦ä¸² --> golangä¸phpçš„ä¸»æµæ–¹æ³•, javaçš„nutz

```
å¿«é€Ÿçµæ´»
ä½†ä¸æ–¹ä¾¿ç»´æŠ¤, é‡æ„ç«è‘¬åœº
```

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647255407077.png)

- `ä»£ç ä¸SQLåˆ†ç¦»` @nice --> javaçš„Mybatisä¸BeetlSQL(å¤ªå°ä¼—ä¸æ•¢ç”¨)

```
å››ä¸¤æ‹¨åƒæ–¤, æœ€åˆ’ç®—çš„å®ç°æ–¹æ³•
å·²ç»ä¼šSQLçš„å­¦ä¹ æˆæœ¬å¾ˆä½
ä½†ä¸æ–¹ä¾¿è¿ç§»æ•°æ®åº“å’Œé‡æ„

===
@ps ä½†æˆ‘ä¸èƒ½æ¥å—å†™åœ¨xmlé‡Œ
@ps ç›´æ¥åœ¨å­—ç¬¦ä¸²é‡Œå†™SQL, å°±æ²¡æœ‰è¯­æ³•é«˜äº®äº†
```

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647851794820-NSXitX5Hd5J8.png)

- è®¾è®¡æŸ¥è¯¢è§„çº¦ @nice --> nodejsçš„GraphQLæˆ–è€…jsonå¯¹è±¡, javaçš„apijson(GraphQLæ„Ÿè§‰)

```
åˆ†æ‘Šäº†å‰åç«¯å‹åŠ›
ä½†è®¾è®¡è§„çº¦ä¸é€šç”¨å¹¶éš¾æ¨å¹¿

===
@ps ç›¸å½“äºé‡æ–°è®¾è®¡äº†SQL

JPAä¹Ÿå¯ä»¥ç®—å±äºè¿™ç§, ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§è¯¡å¼‚çš„è„‘æ´...
findByUserIdAndTotal(String userid, BigDecimal total)
```

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647255304722.png)

- æ‰©å±•å®ä½“åŠŸèƒ½ --> C#ä¸Python, javaçš„jooq(ç¹ç)

```
ä¾¿äºç»´æŠ¤ç±»å‹ä¸é‡æ„, ä¸æ˜“å‡ºé”™, å¯ä»¥æ‰©å±•æ›´å¤šåŠŸèƒ½
ä½†ä»£ç é‡ç¬é—´ä¸Šå»äº†, æ²¡å•¥ç¾æ„Ÿ
```

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647254669008.png)

- `è¿ç®—ç¬¦å¼€æŒ‚æˆ–é‡è½½` @nice @peek --> C#ä¸kotlinæ˜¯å¤©ç„¶æ”¯æŒçš„, javaæœ‰objectivesql(ä½†ä¸å¥½ç”¨)

```
æŠ€æœ¯ä¸Šæœ€èµå¿ƒæ‚¦ç›®
ä½†ä¸€èˆ¬æ˜¯æ–°å…´çš„è¯­è¨€æ‰ç”¨
```

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647850558790-Y577Bc7pZmwy.png)

---

# å·¥ä½œè¯­è¨€

- java ->>
- python
- javascript 

# ç†Ÿæ‚‰è¯­è¨€ @sub

- golang
- kotlin
- scala 

# é™Œç”Ÿè¯­è¨€ @other

- c# 
- php 
- ruby 

---

# é£æ ¼ @diff

- Active Record
- Mapper 
- Example @old

```
Javaå‰æœŸåƒäº†é™æ€è¯­è¨€ä¸å¤Ÿçµæ´»çš„äº
```

---

# Python

- SQLAlchemy

```py
instances = db.session.query(Instance.name, Instance.sep_status, User.email)
  .outerjoin( User, Instance.user_id==User.id)
  .filter(Instance.is_terminated==0)
```

# JavaScript

- prisma

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647255304722.png)

- typeorm

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647255239267.png)

- sequelize
  - https://www.eggjs.org/zh-CN/tutorials/sequelize

```js
const results = await this.app.mysql.select('posts', { // æœç´¢ post è¡¨
  where: { status: 'draft', author: ['author1', 'author2'] }, // WHERE æ¡ä»¶
  columns: ['author', 'title'], // è¦æŸ¥è¯¢çš„è¡¨å­—æ®µ
  orders: [['created_at','desc'], ['id','desc']], // æ’åºæ–¹å¼
  limit: 10, // è¿”å›æ•°æ®é‡
  offset: 0, // æ•°æ®åç§»é‡
});

=> SELECT `author`, `title` FROM `posts`
  WHERE `status` = 'draft' AND `author` IN('author1','author2')
  ORDER BY `created_at` DESC, `id` DESC LIMIT 0, 10;
```



- denodb
  - https://github.com/eveningkid/denodb
  - https://eveningkid.com/denodb-docs/docs/api/model-methods#leftjoin

```js
await Flight.where(Flight.field('departure'), 'Paris')
  .leftJoin(Airport, Airport.field('id'), Flight.field('airportId'))
  .get();
```


---

# Kotlin

- `Ktorm` @nice
    - @code https://github.com/vincentlauvlwj/Ktorm
    - @doc https://ktorm.liuwj.me/

```java
val employees = Employees
    .joinReferencesAndSelect()
    .whereWithConditions {
        if (someCondition) {
            it += Employees.managerId.isNull()
        }
        if (otherCondition) {
            it += Employees.departmentId eq 1
        }
    }
    .orderBy(Employees.id.asc())
    .limit(0, 10)
    .map { Employees.createEntity(it) }
```

- easysql
  - https://github.com/wz7982/easysql/

```
å…¼å®¹java, ä½†ä¸å»ºè®®  

===
val select = db
    .select(case(User.gender eq 1 then "ç”·") elseIs "å¥³" alias "gender")
    .select(sum(User.id) * 100 alias "sum_id")
    .from(User)
    .groupBy(case(User.gender eq 1 then "ç”·") elseIs "å¥³")
```

# golang

- gorm

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647255407077.png)

# Scala

- slick
  - https://github.com/playframework/play-slick
  - https://scala-slick.org/docs/

```
å‡½æ•°å¼ç¼–ç¨‹
@ps çœ‹ä¸æ‡‚
```

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647850892134-2nty56TZdZHm.png)

---

# C#

- `efcore` @nice
  - https://github.com/dotnet/efcore
  - https://docs.microsoft.com/en-us/ef/
  - https://blog.csdn.net/sD7O95O/article/details/117308540
  
```cs
db.Set<UserInfor>().ToList();
 
//æŸ¥è¯¢è¡¨è¾¾å¼
var account = (
  from u in _context.Users
  where u.Id == id
  select u.Account
).ToList();
 
//æŸ¥è¯¢å•ä¸ª
_context.Movie.FirstOrDefaultAsync(m => m.ID == id);
_context.Movie.FindAsync(id); 
//æŸ¥è¯¢æŒ‡å®šåˆ—
_context.Set<User>().AsNoTracking().Where(t=>t.Id=="11").Select(t => new { t.Account, t.PassWord }).FirstOrDefaultAsync();
 
// é¢„å…ˆåŠ è½½æŸ¥è¯¢
var blogs = context.Blogs.Include(blog => blog.Posts).ToList();
// åŒ…å«å¤šä¸ªå±‚çº§çš„æŸ¥è¯¢
var blogs = context.Blogs.Include(blog => blog.Posts).ThenInclude(post => post.Author).ToList();
```  

- Dapper @nice

- freesql @nice
  - https://github.com/dotnetcore/FreeSql
  - http://freesql.net/

```cs
fsql.Select<Topic, Category, CategoryType>()
  .LeftJoin((a,b,c) => a.CategoryId == b.Id)
  .LeftJoin((a,b,c) => b.ParentId == c.Id)
  .Where((a,b,c) => c.Id > 0)
  .ToList((a,b,c) => new { a,b,c });
```

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647254669008.png)

- sqlsugar
  - https://www.donet5.com/Home/Doc

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647849922297-GNEaKRsePshn.png)  



# PHP

- laravel
  - https://laravel.com/

![](https://luo0412.oss-cn-hangzhou.aliyuncs.com/1647254824914.png)

- thinkphp
  - https://www.kancloud.cn/manual/thinkphp6_0/1037479

```php
// ç®€å•æŸ¥è¯¢
Db::table('think_user')
    ->where('status',1)
    ->order('create_time')
    ->limit(10)
    ->select();

// å…³è”
Db::table('think_user')
  ->alias('a')
  ->join(['think_work'=>'w'],'a.id=w.artist_id')
  ->join(['think_card'=>'c'],'a.card_id=c.id')
  ->select();    
```

# Ruby

- rails
  - https://www.jianshu.com/p/722ed2608124

```ruby
# ç®€å•çš„æ›´æ–°
user = User.find_by(name: 'David')
user.name = 'Dave'
user.save

# ç”¨updateæ–¹æ³•
user = User.find_by(name: 'David')
user.update(name: 'Dave')

# user = User.find_by(name: 'David')
user.update(name: 'Dave')

# æ‰¹é‡ä¿®æ”¹
User.update_all "name = 'cwh'"
```